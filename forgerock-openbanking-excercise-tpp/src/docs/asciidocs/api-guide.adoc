:toc: left
= How to use the Open Banking TPP Java sample

== Introduction

This sample application gives you a base for building your TPP app using Spring.
It will show you the basic Open Banking flow:
* On-boarding to the ASPSP
* Make a payment
* Retrieve financial data

This sample is based on the ForgeRock OBRI but can easily be integrated with other ASPSP.

== Test the application is running

Try the curl command:

include::{snippets}/hello-world/curl-request.adoc[]

You should have the famous response

include::{snippets}/hello-world/http-response.adoc[]


== On-board your TPP

To on-board the sample TPP app with a specific ASPSP, call :

include::{snippets}/on-boarding/curl-request.adoc[]

You should receive the on-boarding result

include::{snippets}/on-boarding/http-response.adoc[]

== Make a payment

To make a payment with the sample TPP app to a specific ASPSP :

First, you need to initiate a payment:
include::{snippets}/PaymentApiTest/initiate-payment/1/curl-request.adoc[]

This will give you the uri where you need to redirect the PSU:

include::{snippets}/PaymentApiTest/initiate-payment/1/http-response.adoc[]

To receive the result of the PSU interacting with his ASPSP, you wait until you receive something in your callback uri.
When that happened, you will receive the info in the fragment, which will be automatically redirected by a java script into the
tpp example backend.
Don't worry, this happen automatically

include::{snippets}/PaymentApiTest/initiate-payment/2/curl-request.adoc[]

As a response, you get the payment result:
include::{snippets}/PaymentApiTest/initiate-payment/2/http-response.adoc[]




